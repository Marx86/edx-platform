## mako

<%page expression_filter="h" args="online_help_token, use_cookie_banner=False"/>

<%namespace name='static' file='../static_content.html'/>
<%namespace file='../main.html' import="login_query"/>
<%!
from django.urls import reverse
from django.utils.translation import ugettext as _

from lms.djangoapps.ccx.overrides import get_current_ccx
from openedx.core.djangolib.markup import HTML, Text

# App that handles subdomain specific branding
from branding import api as branding_api
from openedx.core.djangoapps.lang_pref.api import header_language_selector_is_enabled, released_languages

%>

## Provide a hook for themes to inject branding on top.
<%block name="navigation_top" />

## Add UI Toolkit components if using the Pattern Library
% if uses_pattern_library:
    <%block name="js_extra">
    <%static:require_module module_name="js/header_factory" class_name="HeaderFactory">
    HeaderFactory();
    </%static:require_module>
    </%block>
% endif
  <script type="text/javascript"><!--
function Blockingnoplan() {
		$(".modal-overlay").show()
		$(".modal-window").show()
}
function Blockingplan() {
		$(".modal-overlay").show()
		$(".modal-window-plan").show()
}
//--></script>
        % if user.is_authenticated:
	  <script type="text/javascript">
!function(e){var t=Math.floor(Date.now()/1e3),n=tedixUUid.created;tedixUUid.usertype;if("student"==tedixUUid.usertype){function o(){var t=e.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://install-dev.simpleshop.ro/simpleshop.js";var n=e.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}window.__simpleShopConfig={storeId:"JPJHNTSHMW",shopActions:{openWindow:".selectPlanLink"},shopOverride:{productCta:"Buy"},euid:tedixUUid.id,onLoad:e=>{e.getLastTransaction().then(o=>{if(o.number){switch(o.content.data.items[0]._id){case"5f4f68bc68c04f75643ed572":var a=o.created_time+2592e3-t;break;case"5f4f692268c04f758103f792":a=o.created_time+7776e3-t;break;case"5f4f693e68c04f758e084d32":a=o.created_time+31104e3-t}var s=(a/86400).toFixed(0);$(".insert").html(s),$(".message-noplan").hide(),$(".message-plan").html("<strong>"+e.getExternalUID()+"</strong> "+JSON.stringify(o)).hide(),s>30?console.log("Userul mai are abonament"):s>15&&s<=30?$(".announces-green-new").show():s>0&&s<=15?$(".announces-red-new").show():setInterval(Blockingplan,18e3)}else{var i=t-n,r=30-(i/86400).toFixed(0);console.log("ct"+t),console.log("uct"+n),console.log("utr"+i),$(".insert").html(r),r>0&&r<=7?$(".announces-red").show():r>7&&r<30?$(".announces-green").show():setInterval(Blockingnoplan,18e3)}})}},window.attachEvent?window.attachEvent("onload",o):window.addEventListener("load",o,!1)}}(document);
  </script>	

	<div class="announces-green" style="background-color:#24AD97;padding:15px;color: #ffffff;text-align:center;display:none;">
		<span class="" style="text-align:center;font-size:16px;">Bine ai venit pe platforma TEDIX! <b>Mai ai <span class="insert">.</span> zile de utilizare gratuită a sistemului. Abonează-te dând click </b> <a href="javascript:;" class="selectPlanLink" style="background-color:orange;border-radius:5px;padding:5px 20px;color:#ffffff;display:inline-block;">Aici</a></span>
	</div>
	<div class="announces-green-new" style="background-color:#24AD97;padding:15px;color: #ffffff;text-align:center;display:none;">
		<span class="" style="text-align:center;font-size:16px;">Mulțumim că utilizezi platforma TEDIX. <b> Mai ai <span class="insert">.</span> zile până la expirarea abonamentului. Reînnoiește-ți abonamentul dând click</b> <a href="javascript:;" class="selectPlanLink" style="background-color:orange;border-radius:5px;padding:5px 20px;color:#ffffff;display:inline-block;">Aici</a></span>
	</div>
	<div class="announces-red" style="background-color:#c90000;padding:15px;color: #ffffff;text-align:center;display:none;">
		<span class="" style="text-align:center; font-size:16px;">Bine ai venit pe platforma TEDIX! <b>Mai ai <span class="insert">.</span> zile de utilizare gratuită a sistemului. Abonează-te dând click </b> <a href="javascript:;" class="selectPlanLink" style="background-color:orange;border-radius:5px;padding:5px 20px;color:#ffffff;display: inline-block;">Aici</a></span>
	</div>
	<div class="announces-red-new" style="background-color:#c90000;padding:15px;color: #ffffff;text-align:center;display:none;">
		<span class="" style="text-align:center; font-size:16px;">Mulțumim că utilizezi platforma TEDIX. <b>Mai ai <span class="insert">.</span> zile până la expirarea abonamentului. Reînnoiește-ți abonamentul dând click</b> <a href="javascript:;" class="selectPlanLink" style="background-color:orange;border-radius:5px;padding:5px 20px;color:#ffffff;display: inline-block;">Aici</a></span>
	</div>
	<div class="modal-window" style="display:none;">
		<div class="logo" style=""><img src="${static.url("images/logo.png" )}" style="width:70%;max-width:40vw;"></div>
		<div style="text-align:center;padding: 8% 7%;font-weight: normal;">
			<p>Ne pare rău dar perioada de grație pentru utilizarea gratuită a platformei TEDIX s-a încheiat.</p>
			<p>Pentru a putea utiliza în continuare platforma te rugăm să dai click pe butonul de mai jos</p>
		</Div>
		<div class="modal-content"style="">
		  <div style="display:none !important;"class="alert alert-danger mb-3 message-noplan">The set user doesn't have a payment plan</div>
			<div class="alert alert-info mb-3 message-plan" style="display:none;">...</div>
			<a href="javascript:;" id="selectPlanLink" class="btn btn-primary selectPlanLink" style="">Cumpară Abonament</a>
		</div>
	</div>
	<div class="modal-window-plan" style="display:none;">
		<div class="logo" style=""><img src="${static.url("images/logo.png" )}" style="width:70%;max-width:40vw;"></div>
		<div style="text-align:center;padding: 8% 7%;font-weight: normal;">
			<p>Ne pare rău dar abonamentul tău a expirat.</p>
			<p>Pentru a putea utiliza în continuare platforma te rugăm să prelungești abonamentul dând click pe butonul de mai jos</p>
		</Div>
		<div class="modal-content"style="">
		  <div style="display:none !important;"class="alert alert-danger mb-3 message-noplan">The set user doesn't have a payment plan </div>
			<div class="alert alert-info mb-3 message-plan" style="display:none;">...</div>
			<a href="javascript:;" id="selectPlanLink" class="btn btn-primary selectPlanLink" style="">Cumpară Abonament</a>
		</div>
	</div>
	<div class="modal-overlay" style="display:none;"></div>
        % else:
        % endif

<header class="global-header ${'slim' if course else ''}">
    % if use_cookie_banner:
        ${static.renderReact(
            component="CookiePolicyBanner",
            id="cookie-policy-banner",
            props={}
        )}
    % endif
    <div class="main-header">
        <%include file="navbar-logo-header.html" args="online_help_token=online_help_token"/>
        <div class="hamburger-menu" role="button" aria-label=${_("Options Menu")} aria-expanded="false" aria-controls="mobile-menu" tabindex="0">
            <span class="line"></span>
            <span class="line"></span>
            <span class="line"></span>
            <span class="line"></span>
        </div>
        % if user.is_authenticated:
            <%include file="navbar-authenticated.html" args="online_help_token=online_help_token"/>
        % else:
            <%include file="navbar-not-authenticated.html" args="online_help_token=online_help_token"/>
        % endif
    </div>
    <div class="mobile-menu hidden" aria-label=${_("More Options")} role="menu" id="mobile-menu"></div>
</header>

% if course:
<!--[if lte IE 9]>
<div class="ie-banner" aria-hidden="true">${Text(_('{begin_strong}Warning:{end_strong} Your browser is not fully supported. We strongly recommend using {chrome_link} or {ff_link}.')).format(
    begin_strong=HTML('<strong>'),
    end_strong=HTML('</strong>'),
    chrome_link=HTML('<a href="https://www.google.com/chrome" target="_blank">Chrome</a>'),
    ff_link=HTML('<a href="http://www.mozilla.org/firefox" target="_blank">Firefox</a>'),
)}</div>
<![endif]-->
% endif

% if settings.FEATURES.get('ENABLE_COOKIE_CONSENT', False):
  <%include file="../widgets/cookie-consent.html" />
% endif

% if header_language_selector_is_enabled():
    <% languages = released_languages() %>
    % if len(languages) > 1:
        <form action="/i18n/setlang/" method="post" class="settings-language-form" id="language-settings-form">
            <input type="hidden" id="csrf_token" name="csrfmiddlewaretoken" value="${csrf_token}">
            % if user.is_authenticated:
                <input title="preference api" type="hidden" class="url-endpoint" value="${reverse('preferences_api', kwargs={'username': user.username})}" data-user-is-authenticated="true">
            % else:
                <input title="session update url" type="hidden" class="url-endpoint" value="${reverse('session_language')}" data-user-is-authenticated="false">
            % endif
            <label><span class="sr">${_("Choose Language")}</span>
            <select class="input select language-selector" id="settings-language-value" name="language">
                % for language in languages:
                    % if language[0] == LANGUAGE_CODE:
                        <option value="${language[0]}" selected="selected">${language[1]}</option>
                    % else:
                        <option value="${language[0]}" >${language[1]}</option>
                    % endif
                % endfor
            </select>
            </label>
        </form>
    % endif
% endif
